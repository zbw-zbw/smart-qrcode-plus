# 需求文档

## SmartQR Plus - 浏览器扩展插件

### 一、产品概述

**产品名称**：SmartQR Plus

**产品类型**：Chrome 浏览器扩展插件

**目标用户**：

- 前端开发者
- 产品经理 / 运营人员
- 有二维码分享或 URL 参数调试需求的用户

**核心价值**：

- 快速将当前页面链接生成二维码，便于扫码访问
- 可视化拆解并编辑 URL 参数，快速调试和复用
- 实时预览修改后的二维码，提升效率

---

### 二、核心功能模块

#### 1. 自动生成当前标签页二维码

- 获取当前激活标签页的 URL
- 生成二维码并渲染至 UI（使用 canvas 或 SVG）
- 支持复制 / 下载二维码图像

#### 2. 手动输入/编辑链接生成二维码

- 提供 URL 输入框，支持手动粘贴、修改链接
- 输入变化后实时更新二维码
- 对非法 URL 自动提示并禁用二维码渲染

#### 3. URL 参数解析与编辑

- 自动解析 URL 中 query 参数，显示为键值表格
- 表格内支持：
  - 编辑参数值（实时更新）
  - 删除参数
  - 添加新参数
- 所有操作实时反映到 URL 和二维码

#### 4. 快捷操作

- 复制当前 URL
- 复制二维码链接 / 下载二维码
- 一键恢复原始 URL（重置参数）

#### 5. 可选功能（增强体验）

- 二维码大小、配色可设置（默认样式即可）
- 是否开启 URL 自动更新监听（支持 SPA 页面）
- Options 页面支持偏好设置存储

---

### 三、页面结构 & 交互说明

#### Popup 页面（主页面）结构

```
+------------------------------------------------+
| SmartQR Plus                                   |
+------------------------------------------------+
| 当前链接：                                     |
| [ https://example.com?foo=1&bar=2 ] [编辑]     |
+------------------------------------------------+
| 二维码显示区域                                 |
| [canvas/svg 实时渲染]                          |
+------------------------------------------------+
| URL 参数列表：                                 |
| foo = 1   [编辑] [删除]                        |
| bar = 2   [编辑] [删除]                        |
| [+ 添加参数]                                   |
+------------------------------------------------+
| [复制链接] [复制二维码] [下载二维码]          |
+------------------------------------------------+
```

---

### 四、技术选型

- 前端框架：React + TypeScript + Tailwind CSS（或 UnoCSS）
- 打包构建：Vite + crxjs/vite-plugin
- 二维码生成：qrcode.react 或 qrcode 库
- Chrome 插件标准：Manifest v3

---

### 五、开发计划

#### 阶段 1：插件结构搭建（Day 1）

- 搭建 React + Vite + Manifest V3 插件骨架
- 实现 popup 页面基础布局

#### 阶段 2：二维码功能（Day 2-3）

- 获取当前标签页链接
- 生成二维码 & 下载 / 复制功能
- 手动输入 URL 修改二维码

#### 阶段 3：URL 参数解析与编辑（Day 4-5）

- 拆解 URL 参数为键值表格
- 实现参数的增删改功能
- 实时同步链接和二维码更新

#### 阶段 4：可选增强功能（Day 6-7）

- 样式优化（Tailwind）
- 支持设置二维码尺寸 / 颜色
- Options 页面开发 & 本地存储偏好

---

### 六、可扩展性

- 支持 URL 模板保存 & 历史记录
- 接入短链接服务（如 Bit.ly）
- 支持 iframe 中页面链接解析
- 国际化支持（i18n）

---

### 七、备注

- 插件默认权限应控制在最小（"activeTab"、"scripting"）
- 安全性：防止 XSS，限制不可信输入
- 所有操作需保证前端本地完成（不依赖后端）

---

> 备注：本 PRD 可作为 Cursor 项目创建和分阶段开发的蓝图使用。

